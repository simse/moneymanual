---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';

import PoundIcon from 'virtual:icons/bx/pound';
import LineChartIcon from 'virtual:icons/bx/line-chart';
import SchoolIcon from 'virtual:icons/bx/bxs-graduation';

const allPages = await getCollection('pages', ({ data }) => {
  return data.type === 'section';
});

const tools = [
  {
    name: 'Take Home Pay Calculator',
    description: 'Calculate how much you should earn after taxes and other contributions',
    href: '/tools/take-home-pay',
    bgColour: 'bg-pink-200',
    iconColour: 'text-pink-900',
    icon: PoundIcon,
  },
  {
    name: 'Student Loan Repayment',
    description: 'Find out how long it will take to repay your student loan',
    href: '/tools/student-loan-repayment',
    bgColour: 'bg-blue-200',
    iconColour: 'text-blue-900',
    icon: SchoolIcon,
  },
  {
    name: 'Investment Calculator',
    description: 'Calculate how much your investments will grow over time',
    href: '/tools/investment-calculator',
    bgColour: 'bg-emerald-200',
    iconColour: 'text-emerald-900',
    icon: LineChartIcon,
  },
];
---
<Layout>
  <Hero />

  <main class="max-w-5xl mx-auto px-4 mt-8">
    <section class="mt-8 mb-12">
      <h2 class="text-2xl font-bold my-4">Tools</h2>

      <ul class="grid grid-cols-3 gap-8">
        {tools.map(tool => (
        <li>
          <a class="flex gap-4 group" href={tool.href}>
            <div class={`w-16 h-16 shrink-0 mt-1 flex items-center justify-center ${tool.bgColour}`}>
              <tool.icon class={`h-10 w-10 ${tool.iconColour}`} />
            </div>
            <div>
              <h3 class="underline text-teal-900 group-hover:decoration-2 font-bold text-lg">{tool.name}</h3>
              <p class="font-medium">{tool.description}</p>
            </div>
          </a>
        </li>
        ))}
      </ul>
    </section>

    <section class="my-12">
      <h2 class="text-2xl font-bold my-4">Topics</h2>
      
      <ul class="w-4/5">
        {allPages.map(page => (
        <li class="border-t">
          <a class="group py-4 block" href={`/${page.id}`}>
            <h3 class="text-xl font-bold text-teal-700 group-hover:text-teal-900 underline mb-2">{page.data.title}</h3>
            <p class="text-lg font-medium">{page.data.description}</p>
          </a>
        </li>
        ))}
      </ul>
    </section>
  </main>
</Layout>
